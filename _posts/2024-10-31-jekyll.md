---
layout:     post
title:      "æŠ˜è…¾Jekyllï¼šè¿˜ç®—é¡ºåˆ©"
subtitle:   "æŠ“ä½åæœˆçš„å°¾å·´"
date:       2024-10-31 21:02:00
author:     "yuxingwei"
header-style: text
catalog: true
tags:
- Jekyll
- Demo
---

## å‰è¨€

æœ€è¿‘çœ‹åˆ°ä¸€ä¸ªä¸»é¢˜ç›¸æ¯”ä¹‹å‰ç”¨çš„[nodejh/hugo-theme-mini: A fast, minimalist and responsive hugo theme for bloggers.](https://github.com/nodejh/hugo-theme-mini)æ’ç‰ˆä¸Šè¦å¤§æ°”å’Œå®½æ•ä¸€äº›ï¼Œæƒ³è¯•è¯•çœ‹ã€‚æœ¬æ¥æ˜¯æƒ³ç›´æ¥ç”¨[zhaohuabing/hugo-theme-cleanwhite: A clean, elegant blog theme for hugo](https://github.com/zhaohuabing/hugo-theme-cleanwhite)ï¼Œäº†è§£äº†ä¸€ä¸‹è¿™ä¸ªé­”æ”¹åçš„ä¸»é¢˜æ²¡æœ‰åŸç‰ˆ[Huxpro/huxpro.github.io: My Blog / Jekyll Themes / PWA](https://github.com/Huxpro/huxpro.github.io)è‡ªç„¶ï¼Œç»“æœå¹²è„†è¯•è¯• Jekyll æ€ä¹ˆç”¨ã€‚åæ¥çœ‹READMEæ‰çŸ¥é“æœ€æœ€æœ€æœ€åˆçš„ç‰ˆæœ¬æ˜¯[StartBootstrap/startbootstrap-clean-blog-jekyll: A Jekyll version of the Clean Blog theme by Start Bootstrap](https://github.com/StartBootstrap/startbootstrap-clean-blog-jekyll)ï¼Œå“ˆå“ˆå“ˆğŸ¤£ã€‚

## å¥½æˆå¼€å§‹äº†

### Windows

è¿™ä¸ªæ¯”è¾ƒç®€å•ï¼ŒæŒ‰ç…§ Git ä»“åº“çš„ README æ­¥éª¤è·‘ä¸€éå°±è¡Œï¼Œå…·ä½“åœ¨å®‰è£… Ruby å’Œ bundle ä¸Šé¢èŠ±äº†ç‚¹æ—¶é—´ï¼Œè§£å†³ä¹‹åå‘ç°åŸæ¥æ˜¯æˆ‘æƒ³å¤šäº†: )

åœ¨ Ruby å®˜ç½‘ä¸‹è½½å®‰è£…åŒ…ï¼Œä¸‹ä¸€æ­¥ä¸‹ä¸€æ­¥ä¸‹ä¸€æ­¥å®‰è£…å¥½åé»˜è®¤ä¼šé…ç½®ç¯å¢ƒå˜é‡ï¼Œç„¶åå›åˆ° README ä¸­çš„æ­¥éª¤å®‰è£…åšå®¢éœ€è¦çš„ä¾èµ–å’Œå¯åŠ¨æœåŠ¡ï¼š

```bash
$ bundle install
$ bundle exec jekyll serve
```

### macOS

ç›´æ¥é€šè¿‡ brew æ¥å®‰è£… Ruby å’Œ bundleï¼š

```bash
$ brew install ruby
```

ç­‰å¾…å®‰è£…å®Œåï¼Œè¯•äº†è¯• Ruby å’Œ bundle å‘½ä»¤éƒ½æ­£å¸¸ï¼Œæˆ‘å¿ƒæƒ³ macOS ä¸Šé¢å°±æ˜¯æ–¹ä¾¿å•Šï¼ˆæ•Œå†›è¿˜æœ‰ 5 ç§’åˆ°è¾¾æˆ˜åœºï¼‰ã€‚å°è¯•é€šè¿‡`bundle exec jekyll serve`å¯åŠ¨ Jekyll æœåŠ¡å¤±è´¥ï¼Œå•ç‹¬æ‰§è¡Œè¯•è¯•ï¼š

```bash
$ jekyll --version
/System/Library/Frameworks/Ruby.framework/Versions/2.6/usr/lib/ruby/2.6.0/rubygems/core_ext/kernel_require.rb:54:in `require': cannot load such file -- google/protobuf_c (LoadError)
	from /System/Library/Frameworks/Ruby.framework/Versions/2.6/usr/lib/ruby/2.6.0/rubygems/core_ext/kernel_require.rb:54:in `require'
	from /Library/Ruby/Gems/2.6.0/gems/google-protobuf-3.23.4-x86_64-darwin/lib/google/protobuf.rb:51:in `rescue in <top (required)>'
	from /Library/Ruby/Gems/2.6.0/gems/google-protobuf-3.23.4-x86_64-darwin/lib/google/protobuf.rb:48:in `<top (required)>'
	from /System/Library/Frameworks/Ruby.framework/Versions/2.6/usr/lib/ruby/2.6.0/rubygems/core_ext/kernel_require.rb:54:in `require'
	from /System/Library/Frameworks/Ruby.framework/Versions/2.6/usr/lib/ruby/2.6.0/rubygems/core_ext/kernel_require.rb:54:in `require'
	from /Library/Ruby/Gems/2.6.0/gems/sass-embedded-1.58.3-x86_64-darwin/ext/sass/embedded_sass_pb.rb:4:in `<top (required)>'
```

ç½‘ä¸Šè®ºå›æ‰¾äº†æ‰¾è¯•è¯•ä¸‹é¢çš„å‘½ä»¤ï¼š

```bash
$ gem install google-protobuf --platform=ruby



^CERROR:  Interrupted
```

æ€ä¹ˆæ²¡æœ‰è¿›åº¦ï¼Œä¸ä¼šæ˜¯å¢™äº†æˆ–è€… hung ä½äº†å§ï¼Œæ›¿æ¢ä¸€ä¸ªå›½å†…æºè¯•è¯•ã€‚ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æ›¿æ¢ gems é»˜è®¤æºï¼š

```bash
# æ·»åŠ é•œåƒæºå¹¶ç§»é™¤é»˜è®¤æº
$ gem sources --add https://mirrors.tuna.tsinghua.edu.cn/rubygems/ --remove https://rubygems.org/

# åˆ—å‡ºå·²æœ‰æº
$ gem sources -l
```

ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æ›¿æ¢ bundler é»˜è®¤æºï¼š

```bash
$ bundle config mirror.https://rubygems.org https://mirrors.tuna.tsinghua.edu.cn/rubygems
```

åŸæ¥å¸¦ä¸Š`-V`å¯ä»¥æ˜¾ç¤ºè¿›åº¦ï¼š

```bash
$ gem install -V google-protobuf --platform=ruby
...
ERROR:  While executing gem ... (Gem::FilePermissionError)
    You don't have write permissions for the /Library/Ruby/Gems/2.6.0 directory.
```

ç»™ä¸€ä¸ªæƒé™è¯•è¯•ï¼š

```bash
$ sudo gem install -V google-protobuf --platform=ruby
Password:
HEAD https://mirrors.tuna.tsinghua.edu.cn/rubygems/api/v1/dependencies
404 Not Found
GET https://mirrors.tuna.tsinghua.edu.cn/rubygems/prerelease_specs.4.8.gz
200 OK
GET https://mirrors.tuna.tsinghua.edu.cn/rubygems/specs.4.8.gz
200 OK
Downloading gem google-protobuf-4.28.3.gem
GET https://mirrors.tuna.tsinghua.edu.cn/rubygems/gems/google-protobuf-4.28.3.gem
Fetching google-protobuf-4.28.3.gem
200 OK
ERROR:  Error installing google-protobuf:
	The last version of google-protobuf (>= 0) to support your Ruby & RubyGems was 3.23.4. Try installing it with `gem install google-protobuf -v 3.23.4`
	google-protobuf requires Ruby version >= 3.0. The current ruby version is 2.6.10.210.
```

brew å®‰è£…çš„ç‰ˆæœ¬è¿™ä¹ˆä½ï¼Ÿä¸å¯¹å§ï¼š

```bash
$ ruby --version
ruby 2.6.10p210 (2022-04-12 revision 67958) [universal.arm64e-darwin24]
```

åŸæ¥ç³»ç»Ÿé»˜è®¤æœ‰ä¸€ä¸ª Rubyï¼Œbrewå®‰è£…åé»˜è®¤æ²¡æœ‰æ›¿æ¢ä¿®æ”¹ç¯å¢ƒå˜é‡ï¼Œé€šè¿‡ç¼–è¾‘`~/.zshrc`è°ƒæ•´å˜é‡ï¼š

```bash
if [ -d "/opt/homebrew/opt/ruby/bin" ]; then
  export PATH=/opt/homebrew/opt/ruby/bin:$PATH
  export PATH=`gem environment gemdir`/bin:$PATH
fi
```

OKï¼š

```bash
$ ruby --version
ruby 3.3.5 (2024-09-03 revision ef084cc8f4) [arm64-darwin24]
```

å†æ¥å®‰è£…ä¸€ä¸‹åšå®¢ä¾èµ–ï¼Œè¿™å‡ å¹´çš„ç»éªŒå‘Šè¯‰æˆ‘`undefined`åº”è¯¥æ˜¯åº“çš„ç‰ˆæœ¬ä¸ä¸€è‡´ï¼š

```bash
$ bundle install
/opt/homebrew/lib/ruby/gems/3.3.0/gems/bundler-1.17.2/lib/bundler/shared_helpers.rb:272:in `search_up': undefined method `untaint' for an instance of String (NoMethodError)

      current  = File.expand_path(SharedHelpers.pwd).untaint
                                                    ^^^^^^^^
	from /opt/homebrew/lib/ruby/gems/3.3.0/gems/bundler-1.17.2/lib/bundler/shared_helpers.rb:259:in `find_file'
	from /opt/homebrew/lib/ruby/gems/3.3.0/gems/bundler-1.17.2/lib/bundler/shared_helpers.rb:251:in `find_gemfile'
	from /opt/homebrew/lib/ruby/gems/3.3.0/gems/bundler-1.17.2/lib/bundler/shared_helpers.rb:27:in `root'
	from /opt/homebrew/lib/ruby/gems/3.3.0/gems/bundler-1.17.2/lib/bundler.rb:234:in `root'
	from /opt/homebrew/lib/ruby/gems/3.3.0/gems/bundler-1.17.2/lib/bundler.rb:246:in `app_config_path'
	from /opt/homebrew/lib/ruby/gems/3.3.0/gems/bundler-1.17.2/lib/bundler.rb:273:in `settings'
	from /opt/homebrew/lib/ruby/gems/3.3.0/gems/bundler-1.17.2/lib/bundler/feature_flag.rb:21:in `block in settings_method'
	from /opt/homebrew/lib/ruby/gems/3.3.0/gems/bundler-1.17.2/lib/bundler/cli.rb:97:in `<class:CLI>'
	from /opt/homebrew/lib/ruby/gems/3.3.0/gems/bundler-1.17.2/lib/bundler/cli.rb:7:in `<module:Bundler>'
	from /opt/homebrew/lib/ruby/gems/3.3.0/gems/bundler-1.17.2/lib/bundler/cli.rb:6:in `<top (required)>'
	from <internal:/opt/homebrew/Cellar/ruby/3.3.5/lib/ruby/3.3.0/rubygems/core_ext/kernel_require.rb>:136:in `require'
	from <internal:/opt/homebrew/Cellar/ruby/3.3.5/lib/ruby/3.3.0/rubygems/core_ext/kernel_require.rb>:136:in `require'
	from /opt/homebrew/lib/ruby/gems/3.3.0/gems/bundler-1.17.2/exe/bundle:23:in `block in <top (required)>'
	from /opt/homebrew/lib/ruby/gems/3.3.0/gems/bundler-1.17.2/lib/bundler/friendly_errors.rb:124:in `with_friendly_errors'
	from /opt/homebrew/lib/ruby/gems/3.3.0/gems/bundler-1.17.2/exe/bundle:22:in `<top (required)>'
	from /opt/homebrew/lib/ruby/gems/3.3.0/bin/bundle:25:in `load'
	from /opt/homebrew/lib/ruby/gems/3.3.0/bin/bundle:25:in `<main>'
```

çˆ¬äº†ä¸€ä¸‹è®ºå›æœç„¶ç¬¦åˆçŒœæµ‹ï¼š

```bash
$ gem uninstall bundler --version '<2' && gem install bundler
Successfully uninstalled bundler-1.17.2
Fetching bundler-2.5.22.gem
Successfully installed bundler-2.5.22
Parsing documentation for bundler-2.5.22
Installing ri documentation for bundler-2.5.22
Done installing documentation for bundler after 0 seconds
1 gem installed
```

æ€ä¹ˆè¿˜ä¸è¡Œï¼š

```bash
$ bundle install
Bundler 2.5.22 is running, but your lockfile was generated with 1.17.2. Installing Bundler 1.17.2 and restarting using that version.
Fetching gem metadata from https://mirrors.tuna.tsinghua.edu.cn/rubygems/.
Fetching bundler 1.17.2
Installing bundler 1.17.2
/opt/homebrew/lib/ruby/gems/3.3.0/gems/bundler-1.17.2/lib/bundler/shared_helpers.rb:272:in `search_up': undefined method `untaint' for an instance of String (NoMethodError)

      current  = File.expand_path(SharedHelpers.pwd).untaint
                                                    ^^^^^^^^
	from /opt/homebrew/lib/ruby/gems/3.3.0/gems/bundler-1.17.2/lib/bundler/shared_helpers.rb:259:in `find_file'
	from /opt/homebrew/lib/ruby/gems/3.3.0/gems/bundler-1.17.2/lib/bundler/shared_helpers.rb:251:in `find_gemfile'
	from /opt/homebrew/lib/ruby/gems/3.3.0/gems/bundler-1.17.2/lib/bundler/shared_helpers.rb:27:in `root'
	from /opt/homebrew/lib/ruby/gems/3.3.0/gems/bundler-1.17.2/lib/bundler.rb:234:in `root'
	from /opt/homebrew/lib/ruby/gems/3.3.0/gems/bundler-1.17.2/lib/bundler.rb:246:in `app_config_path'
	from /opt/homebrew/lib/ruby/gems/3.3.0/gems/bundler-1.17.2/lib/bundler.rb:273:in `settings'
	from /opt/homebrew/lib/ruby/gems/3.3.0/gems/bundler-1.17.2/lib/bundler/feature_flag.rb:21:in `block in settings_method'
	from /opt/homebrew/lib/ruby/gems/3.3.0/gems/bundler-1.17.2/lib/bundler/cli.rb:97:in `<class:CLI>'
	from /opt/homebrew/lib/ruby/gems/3.3.0/gems/bundler-1.17.2/lib/bundler/cli.rb:7:in `<module:Bundler>'
	from /opt/homebrew/lib/ruby/gems/3.3.0/gems/bundler-1.17.2/lib/bundler/cli.rb:6:in `<top (required)>'
	from <internal:/opt/homebrew/Cellar/ruby/3.3.5/lib/ruby/3.3.0/rubygems/core_ext/kernel_require.rb>:136:in `require'
	from <internal:/opt/homebrew/Cellar/ruby/3.3.5/lib/ruby/3.3.0/rubygems/core_ext/kernel_require.rb>:136:in `require'
	from /opt/homebrew/lib/ruby/gems/3.3.0/gems/bundler-1.17.2/exe/bundle:23:in `block in <top (required)>'
	from /opt/homebrew/lib/ruby/gems/3.3.0/gems/bundler-1.17.2/lib/bundler/friendly_errors.rb:124:in `with_friendly_errors'
	from /opt/homebrew/lib/ruby/gems/3.3.0/gems/bundler-1.17.2/exe/bundle:22:in `<top (required)>'
	from /opt/homebrew/lib/ruby/gems/3.3.0/bin/bundle:25:in `load'
	from /opt/homebrew/lib/ruby/gems/3.3.0/bin/bundle:25:in `<main>'
```

ä¿®æ”¹Gemfile.lockï¼Œç”±`1.17.2`æ›´æ–°ä¸º`2.5.22ï¼ˆå½“å‰ç‰ˆæœ¬ï¼‰`ï¼š

```bash
BUNDLED WITH
   2.5.22
```

å¤§åŠŸå‘Šæˆï¼š

```bash
$ bundle exec jekyll serve
logger was loaded from the standard library, but will no longer be part of the default gems starting from Ruby 3.5.0.
You can add logger to your Gemfile or gemspec to silence this warning.
csv was loaded from the standard library, but will no longer be part of the default gems starting from Ruby 3.4.0.
You can add csv to your Gemfile or gemspec to silence this warning.
/opt/homebrew/Cellar/ruby/3.3.5/lib/ruby/3.3.0/json/common.rb:3: warning: ostruct was loaded from the standard library, but will no longer be part of the default gems starting from Ruby 3.5.0.
You can add ostruct to your Gemfile or gemspec to silence this warning.
/opt/homebrew/lib/ruby/gems/3.3.0/gems/safe_yaml-1.0.5/lib/safe_yaml/load.rb:22: warning: base64 was loaded from the standard library, but will no longer be part of the default gems starting from Ruby 3.4.0.
You can add base64 to your Gemfile or gemspec to silence this warning.
/opt/homebrew/lib/ruby/gems/3.3.0/gems/liquid-4.0.4/lib/liquid.rb:72: warning: bigdecimal was loaded from the standard library, but will no longer be part of the default gems starting from Ruby 3.4.0.
You can add bigdecimal to your Gemfile or gemspec to silence this warning.
Configuration file: /Users/xingwei/Documents/yuxingwei.github.io/_config.yml
            Source: /Users/xingwei/Documents/yuxingwei.github.io
       Destination: /Users/xingwei/Documents/yuxingwei.github.io/_site
 Incremental build: disabled. Enable with --incremental
      Generating...
                    done in 1.193 seconds.
 Auto-regeneration: enabled for '/Users/xingwei/Documents/yuxingwei.github.io'
    Server address: http://127.0.0.1:4000/
  Server running... press ctrl-c to stop.
```

## å›å¤´çœ‹çœ‹

ç½‘ä¸Šå†²æµªçš„æ—¶å€™å–œæ¬¢åˆ°å¤„ç…ç…ï¼Œçœ‹åˆ°ä¸é”™çš„åšå®¢ä¸»é¢˜ä¼šæ‹¿æ¥è¯•è¯•ã€‚å¥½åƒä¸€ç›´éƒ½åœ¨æŠ˜è…¾æ ·å¼ï¼Œæœ‰æ—¶å€™è‡ªå·±ä¼šæ€è€ƒåˆ°åº•æ„Ÿå…´è¶£çš„æ˜¯å•¥ï¼Œå‰ç«¯è¿˜æ˜¯åç«¯ï¼ŸğŸ¤”

### Hexo

å°è±¡é‡Œæœ€æ·±åˆ»æ˜¯ç¬¬ä¸€æ¬¡æ¥è§¦é™æ€åšå®¢è¿™ä¸ªä¸œè¥¿ï¼Œå½“æ—¶ç”¨çš„æ˜¯ Hexo æ­é…ä¸»é¢˜[NexT - Theme for Hexo](https://theme-next.js.org/)ã€‚é‚£æ˜¯ä¸€ä¸ªå‡æœŸï¼Œæˆ‘ç«Ÿç„¶è°ƒæ•´æ¥è°ƒæ•´å»ç›´æ¥åˆ°äº†ç¬¬äºŒå¤©æ—©ä¸Š 4 ç‚¹ï¼Œæ²¡æƒ³åˆ°è‡ªå·±ç«Ÿç„¶å¿˜è®°äº†ç¡è§‰ã€‚å½“ç„¶å›è¿‡å¤´æ¥çœ‹å¥½åƒè¿™ç‚¹ä¸œè¥¿å®Œå…¨ä¸è‡³äºï¼Œå¯æ˜¯è°çŸ¥é“å½“æ—¶æ˜¯æ€ä¹ˆæƒ³çš„ï¼Ÿ

### Hugo

åé¢é˜´å·®é˜³é”™çš„åˆ‡åˆ°äº† Hugoï¼Œéš¾é“æ˜¯å› ä¸º Golang çš„æ€§èƒ½æ›´å¥½ï¼Ÿè®°ä¸å¤ªæ¸…ã€‚æ­é…[nodejh/hugo-theme-mini: A fast, minimalist and responsive hugo theme for bloggers.](https://github.com/nodejh/hugo-theme-mini)ç”¨äº†ä¸€é˜µå­ï¼Œä½†æ˜¯é¡µé¢è®¾è®¡ä¸Šæ€»è§‰å¾—å¤ªæ‹§å·´ï¼Œå¥½åƒå¤šå‡ºæ¥çš„ç©ºé—´å¯ä»¥å†å¥½å¥½åˆ©ç”¨ä¸€ä¸‹ã€‚

### Jekyll

![post-jekyll](/img/in-post/post-jekyll.jpg)

## å‚è€ƒ

1. [Huxpro/huxpro.github.io: My Blog / Jekyll Themes / PWA](https://github.com/Huxpro/huxpro.github.io)
2. [hugo-theme-cleanwhite/layouts/partials/footer.html at master Â· zhaohuabing/hugo-theme-cleanwhite](https://github.com/zhaohuabing/hugo-theme-cleanwhite/blob/master/layouts/partials/footer.html)
3. [Update Ruby gem with arm64 binaries (Apple M1 support) Â· Issue #8199 Â· protocolbuffers/protobuf](https://github.com/protocolbuffers/protobuf/issues/8199)
4. [ä¸ºä»€ä¹ˆ Gem å®‰è£…æ²¡æœ‰è¿›åº¦æ¡ Â· Ruby China](https://ruby-china.org/topics/11548)
5. [macOSç¯å¢ƒå®‰è£…Ruby â€” Cloud Atlas beta æ–‡æ¡£](https://cloud-atlas.readthedocs.io/zh-cn/latest/ruby/startup/macos_install_ruby.html)
6. [rubygems Â· é•œåƒç«™ä½¿ç”¨å¸®åŠ© Â· æ¸…åå¤§å­¦å¼€æºè½¯ä»¶é•œåƒç«™ Â· Tsinghua Open Source Mirror](https://mirrors.tuna.tsinghua.edu.cn/help/rubygems/)
7. [search\_up: undefined method 'untaint' error after Ruby upgrade - Stack Overflow](https://stackoverflow.com/questions/73522137/search-up-undefined-method-untaint-error-after-ruby-upgrade)